# 결측치에 관하여

LG Aimers 본선 진출을 하고 싶었다.

그래서 본선에 올라간 사람들 후기를 하나하나씩 검색해봤다.

후기에서는 본선 대회에서 우승한 사람들에 대한 감탄을 자아내는데, 나는 이 감탄 조차도 왜 엄청난 것인지 이해를 못했고
여기서 나는 벽을 느꼈다. 아직도 내가 모르는 게 정말 많구나라는 생각에 정말 모르는 개념이 없을 때까지 블로그에 개념들을 모조리 정리하기로 했다.

그 1번이 바로 결측치이다.

## 결측치란 무엇인가?

결측치란 "데이터셋에서 특정 값이 누락된 상태" 를 말한다.

![alt text](img/결측치/image.png)

여기서 NaN(Not a Number)이 결측치를 나타내는데, 결측치가 발생하는 이유는 다음과 같다.

1. 데이터 수집 문제
  - 설문조사에서 질문에 답변하지 않은 경우
  - 센서 고장으로 데이터가 기록되지 않은 경우

2. 데이터 변환 문제
  - 데이터 병합 과정에서 일부 열이 손실된 경우

3. 특정 조건에서만 값이 존재
  - 어떤 변수는 특정 집단에서만 정의될 때(예: 남성/여성만 해당하는 변수)


## 결측치 탐색

데이터를 분석하기 전에 결측치를 탐색하는 과정은 중요하다. 그 과정은 아래와 같이 이루어진다.

```python
import pandas as pd
import numpy as np

data = {
    "Name": ["철수", "영희", "민수", "지영"],
    "Age": [25, np.nan, 30, 22],
    "Height": [180, 165, np.nan, 170],
    "Weight": [70, 55, 75, np.nan]
}

df = pd.DataFrame(data)

print(df.isnull().sum())  # 각 열의 결측치 개수를 출력
```

위 코드 실행 시 아래의 결과를 얻을 수 있다.

![alt text](img/결측치/image1.png)

isnull.sum() 을 통해 각 열의 결측치 개수를 편하게 볼 수 있다.
각 열에서 어떤 항목이 결측값인지 궁금하다면 sum을 빼고 그냥 isnull()을 쓰면 된다.
결측치인 경우에는 True, 아닌 경우에는 False를 반환한다.


## 결측치 처리

결측치를 그대로 두고 분석을 진행하면 안 된다. 따라서 이를 처리해주는 방법은 크게 두 가지가 있다.

1. 삭제
2. 대체값으로 채우기

### 결측치 삭제
결측값이 있는 행이나 열을 제거할 수 있다. 사용되는 문법은 dropna()이다.

위처럼 데이터를 작성한 뒤 df.dropna() 를 해주면 결측값이 있는 '행'을 제거하고
df.dropna(axis=1) 을 해주면 결측값이 있는 '열'을 제거한다. 

axis에 따라서 행인지 열인지 헷갈릴 때가 많은데, 그냥 '1열' 이라고 외워버렸다.

dropna()를 진행한 뒤의 결과

![alt text](img/결측치/image2.png)

참고로 결측치 삭제의 경우 원본 데이터를 수정하는 것은 아니다. 
기본적으로 새로운 데이터프레임을 반환하기 때문에 아래 코드와 같이 작성해주어야 결측치가 삭제된 것을 확인할 수 있다.
```python
df_cleaned = df.dropna()
print(df_cleaned)
```

### 결측치 대체
결측값에 특정값을 채워 넣는다. 간단한 방법으로 평균값 혹은 중앙값으로 결측값을 대체한다.
사용되는 문법은 df.fillna(특정값)

```python
df["Age"].fillna(df["Age"].mean(), inplace=True)
df["Height"].fillna(df["Height"].median(), inplace=True)
```

여기서 inplace=True 의 의미는 '원본 데이터프레임을 직접 수정' 하겠다는 의미이다.
위처럼 코드를 작성하면 삭제할 때의 예제처럼 df_cleaned 같은 새로운 변수를 할당하지 않아도 결측값이 대체된 것을 확인할 수 있다.

![alt text](img/결측치/image3.png)

